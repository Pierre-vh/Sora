// NOTE: CHECK lines have been generated by utils/update_filecheck_test.py
// RUN: sorac -sema-only -dump-ast %s | FileCheck %s

func foo() {
  let x = foo
  x()
  let y = &foo
  (*y)()
}

// CHECK:      SourceFile numMembers=1
// CHECK-NEXT:    FuncDecl type=() -> void identifier=foo identifierLoc=line:4:6 fnLoc=line:4:1
// CHECK-NEXT:     ParamList numElements=0 lParenLoc=line:4:9 rParenLoc=line:4:10
// CHECK-NEXT:     BlockStmt numElement=4 leftCurlyLoc=line:4:12 rightCurlyLoc=line:9:1
// CHECK-NEXT:       LetDecl letLoc=line:5:3 equalLoc=line:5:9
// CHECK-NEXT:         VarPattern type=() -> void loc=line:5:7 identifier=x
// CHECK-NEXT:           VarDecl type=() -> void identifier=x identifierLoc=line:5:7 immutable
// CHECK-NEXT:         DeclRefExpr type=() -> void loc=line:5:11 decl='foo'@line:4:6
// CHECK-NEXT:       CallExpr type=void lParenLoc=line:6:4 rParenLoc=line:6:5 numArgs=0
// CHECK-NEXT:         LoadExpr implicit type=() -> void
// CHECK-NEXT:           DeclRefExpr type=@lvalue () -> void loc=line:6:3 decl='x'@line:5:7
// CHECK-NEXT:       LetDecl letLoc=line:7:3 equalLoc=line:7:9
// CHECK-NEXT:         VarPattern type=&() -> void loc=line:7:7 identifier=y
// CHECK-NEXT:           VarDecl type=&() -> void identifier=y identifierLoc=line:7:7 immutable
// CHECK-NEXT:         UnaryExpr type=&() -> void & (AddressOf) opLoc=line:7:11
// CHECK-NEXT:           DeclRefExpr type=() -> void loc=line:7:12 decl='foo'@line:4:6
// CHECK-NEXT:       CallExpr type=void lParenLoc=line:8:7 rParenLoc=line:8:8 numArgs=0
// CHECK-NEXT:         ParenExpr type=() -> void lParenLoc=line:8:3 rParenLoc=line:8:6
// CHECK-NEXT:           LoadExpr implicit type=() -> void
// CHECK-NEXT:             UnaryExpr type=@lvalue () -> void * (Deref) opLoc=line:8:4
// CHECK-NEXT:               LoadExpr implicit type=&() -> void
// CHECK-NEXT:                 DeclRefExpr type=@lvalue &() -> void loc=line:8:5 decl='y'@line:7:7
