// NOTE: CHECK lines have been generated by utils/update_filecheck_test.py
// RUN: sorac -parse-only -dump-parse %s | FileCheck %s

func bar() {}

func foo() -> i32 {}

func nestedfuncs(x: (i32, i32)) -> bool {
  func foo(x: i32) -> (i32, i32) {
    func bar(x: i64, y: i32, z: i32) -> i32 {}
  }
}

func function0(p0: i32, p0: (i32, i32), p1: &mut T) -> &mut (A, B) {}

func letdecl() {
  let a
  let mut a
  let (a, mut (b, c), (z))
  let mut (a, b, c, d)
  let _
  let ((_, _), (_, _))

  let a = 0
  let b = a = b
  let (a, b) = (0, 1)
}

// CHECK:      SourceFile numMembers=5
// CHECK:         FuncDecl type=<null_type> identifier=bar identifierLoc=line:4:6 fnLoc=line:4:1
// CHECK:          ParamList numElements=0 lParenLoc=line:4:9 rParenLoc=line:4:10
// CHECK:          BlockStmt numElement=0 leftCurlyLoc=line:4:12 rightCurlyLoc=line:4:13
// CHECK:        FuncDecl type=<null_type> identifier=foo identifierLoc=line:6:6 fnLoc=line:6:1
// CHECK:          ParamList numElements=0 lParenLoc=line:6:9 rParenLoc=line:6:10
// CHECK:          IdentifierTypeRepr loc=line:6:15 identifier=i32
// CHECK:          BlockStmt numElement=0 leftCurlyLoc=line:6:19 rightCurlyLoc=line:6:20
// CHECK:        FuncDecl type=<null_type> identifier=nestedfuncs identifierLoc=line:8:6 fnLoc=line:8:1
// CHECK:          ParamList numElements=1 lParenLoc=line:8:17 rParenLoc=line:8:31
// CHECK:            ParamDecl type=<null_type> identifier=x identifierLoc=line:8:18
// CHECK:              TupleTypeRepr numElements=2 lParenLoc=line:8:21 rParenLoc=line:8:30
// CHECK:                IdentifierTypeRepr loc=line:8:22 identifier=i32
// CHECK:                IdentifierTypeRepr loc=line:8:27 identifier=i32
// CHECK:          IdentifierTypeRepr loc=line:8:36 identifier=bool
// CHECK:          BlockStmt numElement=1 leftCurlyLoc=line:8:41 rightCurlyLoc=line:12:1
// CHECK:            FuncDecl type=<null_type> identifier=foo identifierLoc=line:9:8 fnLoc=line:9:3
// CHECK:              ParamList numElements=1 lParenLoc=line:9:11 rParenLoc=line:9:18
// CHECK:                ParamDecl type=<null_type> identifier=x identifierLoc=line:9:12
// CHECK:                  IdentifierTypeRepr loc=line:9:15 identifier=i32
// CHECK:              TupleTypeRepr numElements=2 lParenLoc=line:9:23 rParenLoc=line:9:32
// CHECK:                IdentifierTypeRepr loc=line:9:24 identifier=i32
// CHECK:                IdentifierTypeRepr loc=line:9:29 identifier=i32
// CHECK:              BlockStmt numElement=1 leftCurlyLoc=line:9:34 rightCurlyLoc=line:11:3
// CHECK:                FuncDecl type=<null_type> identifier=bar identifierLoc=line:10:10 fnLoc=line:10:5
// CHECK:                  ParamList numElements=3 lParenLoc=line:10:13 rParenLoc=line:10:36
// CHECK:                    ParamDecl type=<null_type> identifier=x identifierLoc=line:10:14
// CHECK:                      IdentifierTypeRepr loc=line:10:17 identifier=i64
// CHECK:                    ParamDecl type=<null_type> identifier=y identifierLoc=line:10:22
// CHECK:                      IdentifierTypeRepr loc=line:10:25 identifier=i32
// CHECK:                    ParamDecl type=<null_type> identifier=z identifierLoc=line:10:30
// CHECK:                      IdentifierTypeRepr loc=line:10:33 identifier=i32
// CHECK:                  IdentifierTypeRepr loc=line:10:41 identifier=i32
// CHECK:                  BlockStmt numElement=0 leftCurlyLoc=line:10:45 rightCurlyLoc=line:10:46
// CHECK:        FuncDecl type=<null_type> identifier=function0 identifierLoc=line:14:6 fnLoc=line:14:1
// CHECK:          ParamList numElements=3 lParenLoc=line:14:15 rParenLoc=line:14:51
// CHECK:            ParamDecl type=<null_type> identifier=p0 identifierLoc=line:14:16
// CHECK:              IdentifierTypeRepr loc=line:14:20 identifier=i32
// CHECK:            ParamDecl type=<null_type> identifier=p0 identifierLoc=line:14:25
// CHECK:              TupleTypeRepr numElements=2 lParenLoc=line:14:29 rParenLoc=line:14:38
// CHECK:                IdentifierTypeRepr loc=line:14:30 identifier=i32
// CHECK:                IdentifierTypeRepr loc=line:14:35 identifier=i32
// CHECK:            ParamDecl type=<null_type> identifier=p1 identifierLoc=line:14:41
// CHECK:              ReferenceTypeRepr mutable ampLoc=line:14:45 mutLoc=line:14:46
// CHECK:                IdentifierTypeRepr loc=line:14:50 identifier=T
// CHECK:          ReferenceTypeRepr mutable ampLoc=line:14:56 mutLoc=line:14:57
// CHECK:            TupleTypeRepr numElements=2 lParenLoc=line:14:61 rParenLoc=line:14:66
// CHECK:              IdentifierTypeRepr loc=line:14:62 identifier=A
// CHECK:              IdentifierTypeRepr loc=line:14:65 identifier=B
// CHECK:          BlockStmt numElement=0 leftCurlyLoc=line:14:68 rightCurlyLoc=line:14:69
// CHECK:        FuncDecl type=<null_type> identifier=letdecl identifierLoc=line:16:6 fnLoc=line:16:1
// CHECK:          ParamList numElements=0 lParenLoc=line:16:13 rParenLoc=line:16:14
// CHECK:          BlockStmt numElement=9 leftCurlyLoc=line:16:16 rightCurlyLoc=line:27:1
// CHECK:            LetDecl letLoc=line:17:3
// CHECK:              VarPattern type=<null_type> loc=line:17:7 identifier=a
// CHECK:                VarDecl type=<null_type> identifier=a identifierLoc=line:17:7 immutable
// CHECK:            LetDecl letLoc=line:18:3
// CHECK:              MutPattern type=<null_type> mutLoc=line:18:7
// CHECK:                VarPattern type=<null_type> loc=line:18:11 identifier=a
// CHECK:                  VarDecl type=<null_type> identifier=a identifierLoc=line:18:11 mutable
// CHECK:            LetDecl letLoc=line:19:3
// CHECK:              TuplePattern type=<null_type> numElements=3 lParenLoc=line:19:7 rParenLoc=line:19:26
// CHECK:                VarPattern type=<null_type> loc=line:19:8 identifier=a
// CHECK:                  VarDecl type=<null_type> identifier=a identifierLoc=line:19:8 immutable
// CHECK:                MutPattern type=<null_type> mutLoc=line:19:11
// CHECK:                  TuplePattern type=<null_type> numElements=2 lParenLoc=line:19:15 rParenLoc=line:19:20
// CHECK:                    VarPattern type=<null_type> loc=line:19:16 identifier=b
// CHECK:                      VarDecl type=<null_type> identifier=b identifierLoc=line:19:16 mutable
// CHECK:                    VarPattern type=<null_type> loc=line:19:19 identifier=c
// CHECK:                      VarDecl type=<null_type> identifier=c identifierLoc=line:19:19 mutable
// CHECK:                ParenPattern type=<null_type> lParenLoc=line:19:23 rParenLoc=line:19:25
// CHECK:                  VarPattern type=<null_type> loc=line:19:24 identifier=z
// CHECK:                    VarDecl type=<null_type> identifier=z identifierLoc=line:19:24 immutable
// CHECK:            LetDecl letLoc=line:20:3
// CHECK:              MutPattern type=<null_type> mutLoc=line:20:7
// CHECK:                TuplePattern type=<null_type> numElements=4 lParenLoc=line:20:11 rParenLoc=line:20:22
// CHECK:                  VarPattern type=<null_type> loc=line:20:12 identifier=a
// CHECK:                    VarDecl type=<null_type> identifier=a identifierLoc=line:20:12 mutable
// CHECK:                  VarPattern type=<null_type> loc=line:20:15 identifier=b
// CHECK:                    VarDecl type=<null_type> identifier=b identifierLoc=line:20:15 mutable
// CHECK:                  VarPattern type=<null_type> loc=line:20:18 identifier=c
// CHECK:                    VarDecl type=<null_type> identifier=c identifierLoc=line:20:18 mutable
// CHECK:                  VarPattern type=<null_type> loc=line:20:21 identifier=d
// CHECK:                    VarDecl type=<null_type> identifier=d identifierLoc=line:20:21 mutable
// CHECK:            LetDecl letLoc=line:21:3
// CHECK:              DiscardPattern type=<null_type> loc=line:21:7
// CHECK:            LetDecl letLoc=line:22:3
// CHECK:              TuplePattern type=<null_type> numElements=2 lParenLoc=line:22:7 rParenLoc=line:22:22
// CHECK:                TuplePattern type=<null_type> numElements=2 lParenLoc=line:22:8 rParenLoc=line:22:13
// CHECK:                  DiscardPattern type=<null_type> loc=line:22:9
// CHECK:                  DiscardPattern type=<null_type> loc=line:22:12
// CHECK:                TuplePattern type=<null_type> numElements=2 lParenLoc=line:22:16 rParenLoc=line:22:21
// CHECK:                  DiscardPattern type=<null_type> loc=line:22:17
// CHECK:                  DiscardPattern type=<null_type> loc=line:22:20
// CHECK:            LetDecl letLoc=line:24:3 equalLoc=line:24:9
// CHECK:              VarPattern type=<null_type> loc=line:24:7 identifier=a
// CHECK:                VarDecl type=<null_type> identifier=a identifierLoc=line:24:7 immutable
// CHECK:              IntegerLiteralExpr type=<null_type> loc=line:24:11 str='0'
// CHECK:            LetDecl letLoc=line:25:3 equalLoc=line:25:9
// CHECK:              VarPattern type=<null_type> loc=line:25:7 identifier=b
// CHECK:                VarDecl type=<null_type> identifier=b identifierLoc=line:25:7 immutable
// CHECK:              BinaryExpr type=<null_type> = (Assign) opLoc=line:25:13
// CHECK:                UnresolvedDeclRefExpr type=<null_type> identifier=a loc=line:25:11
// CHECK:                UnresolvedDeclRefExpr type=<null_type> identifier=b loc=line:25:15
// CHECK:            LetDecl letLoc=line:26:3 equalLoc=line:26:14
// CHECK:              TuplePattern type=<null_type> numElements=2 lParenLoc=line:26:7 rParenLoc=line:26:12
// CHECK:                VarPattern type=<null_type> loc=line:26:8 identifier=a
// CHECK:                  VarDecl type=<null_type> identifier=a identifierLoc=line:26:8 immutable
// CHECK:                VarPattern type=<null_type> loc=line:26:11 identifier=b
// CHECK:                  VarDecl type=<null_type> identifier=b identifierLoc=line:26:11 immutable
// CHECK:              TupleExpr type=<null_type> numElements=2 lParenLoc=line:26:16 rParenLoc=line:26:21
// CHECK:                IntegerLiteralExpr type=<null_type> loc=line:26:17 str='0'
// CHECK:                IntegerLiteralExpr type=<null_type> loc=line:26:20 str='1'
